\documentclass[11pt,a4paper]{ivoa}
\input tthdefs
\usepackage{listings}
\lstloadlanguages{XML}
\lstset{flexiblecolumns=true,tagstyle=\ttfamily,showstringspaces=False}
\usepackage{todonotes}

\title{VODataService: A VOResource Schema Extension for Describing
Collections and Services}

\ivoagroup{registry}

\author[http://www.ivoa.net/twiki/bin/view/IVOA/RayPlante]{Raymond Plante}
\author[http://www.ivoa.net/twiki/bin/view/IVOA/MarkusDemleitner]{Markus Demleitner}
\author[http://www.ivoa.net/twiki/bin/view/IVOA/AurelienStebe]{Aurélien Stébé}
\author[http://www.ivoa.net/twiki/bin/view/IVOA/KevinBenson]{Kevin Benson}
\author[http://www.ivoa.net/twiki/bin/view/IVOA/PatrickDowler]{Patrick Dowler}
\author[http://www.ivoa.net/twiki/bin/view/IVOA/MatthewGraham]{Matthew Graham}
\author[http://www.ivoa.net/twiki/bin/view/IVOA/GretchenGreene]{Gretchen Greene}
\author[http://www.ivoa.net/twiki/bin/view/IVOA/PaulHarrison]{Paul Harrison}
\author[http://www.ivoa.net/twiki/bin/view/IVOA/GerardLemson]{Gerard Lemson}
\author[http://www.ivoa.net/twiki/bin/view/IVOA/TonyLinde]{Tony Linde}
\author[http://www.ivoa.net/twiki/bin/view/IVOA/GuyRixon]{Guy Rixon}

\editor{Ray Plante}
\editor{Markus Demleitner}

\previousversion[http://www.ivoa.net/Documents/VODataService/20101202]{REC
1.1}
\previousversion[http://www.ivoa.net/Documents/VODataService/20100916]{PR-20100916}
\previousversion[http://www.ivoa.net/Documents/VODataService/20100914]{PR-20100914}
\previousversion[http://www.ivoa.net/Documents/VODataService/20100412]{PR-20100412}
\previousversion[http://www.ivoa.net/Documents/VODataService/20090903]{PR-20090903}
\previousversion[http://www.ivoa.net/Documents/WD/ReR/VODataService-20090508.html]{WD-20090508}
     

\begin{document}
\begin{abstract}
VODataService refers to an XML encoding standard for a specialized
extension of the IVOA Resource Metadata that is useful for describing
data collections and the services that access them.  It is defined as
an extension of the core resource metadata encoding standard known as
VOResource \citep{2008ivoa.spec.0222P} using XML Schema.
The specialized resource types defined by the VODataService schema
allow one to describe how the data underlying the resource cover the
sky as well as cover frequency and time.  This coverage description
leverages heavily the Space-Time Coordinates (STC) standard
schema\todo{Fix this}.  VODataService also enables detailed
descriptions of tables that includes information useful to the
discovery of tabular data.  It is intended that the VODataService data
types will be particularly useful in describing services that support
standard IVOA service protocols.  
\end{abstract}

\section*{Acknowledgments}

Versions 1.0 and 1.1 of this document have been developed with support from the
National Science Foundation's
Information Technology Research Program under Cooperative Agreement
AST0122449 with The Johns Hopkins University, from the
UK Particle Physics and Astronomy
Research Council (PPARC), from the European Commission's (EC)
Sixth
Framework Programme via the 
Optical Infrared Coordination Network (OPTICON), and from EC's
Seventh Framework Programme
via its
eInfrastructure Science Repositories initiative.

Version 1.2 of this document was developed in part with support from the
German federal ministry for research and education's e-inf-astro (BMBF
FKZ 05A17VH2)


\section*{Conformance-related definitions}

The words ``MUST'', ``SHALL'', ``SHOULD'', ``MAY'', ``RECOMMENDED'', and
``OPTIONAL'' (in upper or lower case) used in this document are to be
interpreted as described in IETF standard RFC2119 \citep{std:RFC2119}.

The \emph{Virtual Observatory (VO)} is a
general term for a collection of federated resources that can be used
to conduct astronomical research, education, and outreach.
The \href{http://www.ivoa.net}{International
Virtual Observatory Alliance (IVOA)} is a global
collaboration of separately funded projects to develop standards and
infrastructure that enable VO applications.


\section*{Syntax Notation Using XML Schema}

The eXtensible Markup Language, or XML, is document syntax for marking
textual information with named tags and is defined by \citet{std:XML}.
The set of XML tag names and the syntax
rules for their use is referred to as the document schema.  One way to
formally define a schema for XML documents is using the W3C standard
known as XML Schema \citep{std:XSD}.

The XML Schemas of VODataService as well as VOResource and its other
extensions are
available from the IVOA document
repository\footnote{\url{http://www.ivoa.net/xml}} at any time.
Parts of the schema appear within the main sections of this document;
however, documentation nodes have been left out for the sake of brevity.
Where the content of the pieces of schema embedded in this text
diverges from the schema document in the IVOA document
repository, the version in the schema repository is authoritative.

References to specific elements and types defined in the VOResource
schema include the namespaces prefix \xmlel{vr} as in
\xmlel{vr:Resource} (a type defined in the VOResource schema; the
recommended namespace prefix for VODataService as per Registry
Interfaces 1.1 \citep{todo:RI1.1}, sect.~2.2, is \xmlel{vs}.

\section{Introduction}

The VOResource standard \citep{todo:VOR1.1} provides a means of
encoding IVOA Resource Metadata\todo{decouple from RM} in XML.
VOResource uses XML Schema \citep{std:XSD} to define
most of the XML syntax rules (while a few of the syntax rules are
outside the scope of Schema).  VOResource also describes mechanisms
for creating extensions to the core VOResource metadata.  This allows
for the standardization of new metadata for describing specialized
kinds of resources in a modular way without deprecating the core
schema or other extensions.  This document defines one such extension
referred to as VODataService.

\subsection{The Role in the IVOA Architecture}

The IVOA Architecture \citep{note:VOARCH} provides a high-level
view of how IVOA standards work together to connect users and
applications with providers of data and services, as depicted in the
diagram in Fig.~\ref{fig:archdiag}.

\begin{figure}
\centering
\includegraphics[width=0.9\textwidth]{role_diagram.pdf}
\caption{Architecture diagram for VODataService}
\label{fig:archdiag}
\end{figure}




In this architecture, users can leverage a variety of tools (from the
User Layer) to discover archives and services of interest (represented
in the Resource Layer); registries provide the means for this
discovery.  A registry is a repository of descriptions of resources
that can be searched based on the metadata in those descriptions.  The
Resource Metadata standard \citep{2007ivoa.spec.0302H} defines the core
concepts used in the resource descriptions, and the VOResource
standard defines the XML format.  As an
extension of VOResource, the VODataService standard, defined in this
document, specifically supports descriptions of data collections and
services.  

\subsection{Purpose}


The purpose of this extension is to define common XML Schema
types -- particularly new resource types -- that are useful for describing
data collections and services that access data.  In particular, it
allows one to describe the data's \emph{coverage}:  the parts of the
sky with which the data are associated and the time and frequency ranges that
were observed or modeled to create the data.  It also allows one to
describe tables in detail.  In particular, one can describe each of
the columns of a table--providing, for example, its name, type, UCD
\citep{2005ivoa.spec.1231D}, 
and textual description.  When this metadata is part of a resource
description in a registry, it becomes possible
to discover tables that contain particular kinds of data.  



It is intended that VODataService will be central to describing
services that support standard IVOA data access layer protocols such
as Simple Image Access \citep{2015ivoa.spec.1223D} and Simple Cone Search
\citep{2008ivoa.specQ0222P}.  While other VOResource extensions would
define the protocol-specific metadata (encapsulated as a standard
\emph{capability} from VOResource), the general service
resource description would share the common data concepts such as
coverage and tabular data.  Note, however, that a service described
using the VODataService schema need not support any standard
protocols.  With the VODataService extension schema plus the core
VOResource schema, it is possible to describe a custom service
interface that accesses data.  



As a legal extension of VOResource, the use
of VODataService is subject to the rules and recommendations for XML
\citep{std:XML}, XML Schema \citep{std:XSD},
and VOResource itself.  


\section{The VODataService Data Model}


The VODataService extension in general enables the description of two
types of resources:  data collections and services that access data.
Here's an example of a VOResource document (abbreviated for the
purposes of illustration) that describes a service from the NASA
Extragalactic Database (NED) that provides measured redshifts for a
given object.



\begin{lstlisting}[language=XML]
<ri:Resource xmlns="" 
             xsi:type="vs:CatalogService" status="active" 
             updated="2008-04-29T14:51:54" created="2005-10-14T01:46:00"
             xmlns:ri="http://www.ivoa.net/xml/RegistryInterface/v1.0" 
             xmlns:vr="http://www.ivoa.net/xml/VOResource/v1.0" 
             xmlns:vs="http://www.ivoa.net/xml/VODataService/v1.1" 
             xmlns:stc="http://www.ivoa.net/xml/STC/stc-v1.30.xsd" 
             xmlns:xlink="http://www.w3.org/1999/xlink"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.ivoa.net/xml/VOResource/v1.0
                                 http://www.ivoa.net/xml/VOResource/v1.0
                                 http://www.ivoa.net/xml/VODataService/v1.1
                                 http://www.ivoa.net/xml/VODataService/v1.1
                                 http://www.ivoa.net/xml/STC/stc-v1.30.xsd
                                 http://www.ivoa.net/xml/STC/stc-v1.30.xsd">

  <title>The NASA/IPAC Extragalactic Database</title>
  <shortName>NED_redshift</shortName>
  <identifier>ivo://ned.ipac/Redshift_By_Object_Name</identifier>
  <curation>
    <publisher>The NASA/IPAC Extragalactic Database</publisher>
    <contact>
      <name>Olga Pevunova</name>
      <email>contact@datacenter.edu</email>
    </contact>
  </curation>
  <content>
    <subject>redshift</subject>
    <subject>galaxies</subject>
    <description>
      NED is built around a master list of extragalactic objects for
      which cross-identifications of names have been established,
      accurate positions and redshifts entered to the extent possible,
      and some basic data collected. This service will return recorded 
      redshifts for a given object.
    </description>
    <referenceURL>http://nedwww.ipac.caltech.edu/help/data_help.html#zdat</referenceURL>
    <type>BasicData</type>
    <contentLevel>Research</contentLevel>
  </content>

  <capability>
    <interface xsi:type="vs:ParamHTTP">
      <accessURL use="base">
         http://nedwww.ipac.caltech.edu/cgi-bin/nph-datasearch?search_type=Redshifts&amp;amp;
      </accessURL>
      <queryType>GET</queryType>
      <resultType>application/xml+votable</resultType>
      <param use="required">
        <name>objname</name>
        <description>Name of object</description>
        <dataType>string</dataType>
      </param>
      <param use="required">
        <name>of</name>
        <description>Output format parameter, must be "xml_main" for VOTable output.</description>
        <dataType>string</dataType>
      </param>
    </interface>
  </capability>

  <coverage>
    <stc:STCResourceProfile>
       <stc:AstroCoordSystem xlink:type="simple"
                             xlink:href="ivo://STClib/CoordSys#UTC-FK5-TOPO" 
                             id="UTC-FK5-TOPO"/> 
       <stc:AstroCoordArea coord_system_id="UTC-FK5-TOPO">
          <stc:AllSky/>
       </stc:AstroCoordArea>
    </stc:STCResourceProfile>
    
    <waveband>Radio</waveband>
    <waveband>Optical</waveband>
  </coverage>

  <tableset>
    <schema>
      <name>default</name>
      <table type="output">
        <name>default</name>
        <column>
          <name>No.</name>
          <description>
             A sequential data-point number applicable to this list only.
          </description>
          <ucd>meta.number</ucd>
          <dataType xsi:type="vs:VOTableType">int</dataType>
        </column>
        <column>
          <name>Name in Publication</name>
          <description>
             The object's name in NED's standard format, of the object to which the data apply.
          </description>
          <ucd>meta.id;name</ucd>
          <dataType xsi:type="vs:VOTableType">string</dataType>
        </column>
        <column>
          <name>Published Velocity</name>
          <description>
            The radial velocity , derived from derived from the shift of some spectral feature, in km/sec
          </description>
          <unit>km/sec</unit>
          <ucd>src.spect.dopplerVeloc</ucd>
          <dataType xsi:type="vs:VOTableType">int</dataType>
        </column>
      </table>
    </schema>
  </tableset>
</ri:Resource>
\end{lstlisting}

This example illustrates some of the features of the VODataService
extension:

\begin{enumerate}
\item the extra namespaces associated with
       VODataService metadata; if STC coverage information
        is not
       included, then only the VODataService namespaced is needed.
\item the specific type of resource indicated by
       the value of the \xmlel{xsi:type} attribute; in this case
       \xmlel{vs:CatalogService} indicates that this is
       describing a service that accesses tabular data.
\item the location of the VOResource-related schema 
       documents used by this description,
\item the core VOResource metadata,
\item an interface described by the
       VODataService interface type, \xmlel{vs:ParamHTTP}; this
       type can indicate input arguments it supports.
\item a description of the
       coverage, including an STC
       description plus waveband keywords.
\item a description of the table that is returned
       by the service.
\end{enumerate}

\subsection{The Schema Namespace and Location}


The namespace associated with VODataService extensions is
$$\mbox{\texttt{http://www.ivoa.net/xml/VODataService/v1.1}}.$$
Just like the namespace URI for the VOResource schema, the
VODataService namespace URI can be interpreted as a URL.  Resolving it
will return the XML Schema document 
that defines the VODataService schema.\todo{explain constant ns vs.
v1.1}



Authors of VOResource instance documents may choose to
provide a location for the VOResource XML Schema document and its
extensions using the
\xmlel{xsi:schemaLocation}</a> attribute.  While the choice of
the location value is the choice of the author, this specification
recommends using the VODataService namespace URI as its location URL
(as illustrated in the example above), as in,

\begin{lstlisting}[language=XML]
xsi:schemaLocation="http://www.ivoa.net/xml/VODataService/v1.1
                    http://www.ivoa.net/xml/VODataService/v1.1"
\end{lstlisting}


\begin{admonition}{Note}
The IVOA Registry Interface standard \citep{todo:RI1.1}
       actually \emph{requires} that the VOResource records it
       shares with other registries provide location URLs via
       \xmlel{xsi:schemaLocation} for the VOResource schema and
       all legal extension schemas that are used in the records.  This
       rule would apply to the VODataService schema.
\end{admonition}


The prefix, \xmlel{vs}, is used by convention as the prefix
defined for the VODataService schema; however, instance documents may
use any prefix.  In applications where common use of prefixes is
recommended (such as with the Registry Interfaces specification),
use of the \xmlel{vs} prefix is recommended.
Note also that in this document, the \xmlel{vr} prefix is used to
label, as shorthand, a type or element name that is defined in the
VOResource schema, as in \xmlel{vr:Resource}.



\begin{admonition}{Note}
(todo: remove this; doesn't really apply any more; and there *really*
shouldn't be any VODS 1.0 around any more)

One reason one may \emph{not} be able to use \xmlel{vs}
       to represent the VODataService schema, version 1.1, is because
       it is already in defined to represent VODataService v1.0 and
       cannot be overridden.  At this writing, there are no IVOA
       applications in which this is the case.  Consult
       appendix~\ref{vods10-compat} for more details on
       compatibility issues.</dd>
\end{admonition}


As recommend by the VOResource standard, the
VODataService schema sets \xmlel{elementFormDefault="unqualified"}.
This means that it is not necessary to qualify element names defined
in this schema with a namespace prefix (as there are no global
elements defined).  The only place it is usually needed is as a
qualifier to a VODataService type name given as the value of an
\xmlel{xsi:type} attribute.  


\subsection{Summary of Metadata Concepts}
\label{sect:summ}


The VODataService extension defines four new types of resources.  Two inherit
directly from \xmlel{vr:Resource}:


\begin{bigdescription}
\item[\xmlel{vs:DataCollection}]
This resource declares the existence of a collection of data, what
       it represents, and how to get it.  The access to the data may be
       limited to a human-readable web page (given by
       \xmlel{content/referenceURL}); however, if the
       contents of the collection are available statically via a
       URL (e.g. an FTP URL to a directory containing all the files),
       that URL can be provided.  It can also provide pointers to
       other IVOA registered services that can be used to access the data.
       \todo{deprecate}

\item[\xmlel{vs:StandardSTC}]
This resource type declares one or more coordinate systems described
       using STC \citep{2007ivoa.spec.1030R} such that each can be
       assigned a globally unique identifier (based on the IVOA
       identifier for the resource record itself).  This identifier
       can then be referenced in any other STC description in lieu of
       a fully described coordinate system.  Coordinate systems
       described in this way become reusable standards once they are
       registered in an IVOA registry.\todo{deprecate/remove}
\end{bigdescription}

The other two resource types represent specialized services:


\begin{bigdescription}
\item[\xmlel{vs:DataService}]
Inheriting from \xmlel{vr:Service}, this type is for
       services that access astronomical data.  It adds the ability to
       describe the data's coverage of the
       sky, frequency, and time.

\item[\xmlel{vs:CatalogService}]
Inheriting from \xmlel{vs:DataService}, this type
       specifically refers to a service that accesses tabular data.
       In addition to the coverage information, this type adds the
       ability to describe the tables and their columns.  This is
       intended for describing services that support the ``simple'' IVOA
       data access layer protocols such as Simple Image Access
        and Simple Cone Search.
\end{bigdescription}


In general, \xmlel{coverage} refers to
the extent that data samples the measurement range of the sky (space),
frequency, and time.  The coverage metadata (encoded via the
\xmlel{vs:Coverage} type) has two parts.  The first part
allows a full STC profile description (via the imported STC element,
\xmlel{stc:STCResourceProfile})\todo{deprecate}.  The second part
captures key coverage metadata defined in the IVOA Resource Metadata
standard \citep{2007ivoa.spec.0302H}.  The RM-derived coverage elements can
be considered summarizing metadata for many of the details that
\emph{may} appear within the STC description, and enables simpler
searching of high-level coverage information.



The detailed STC profile contained within the
\xmlel{stc:STCResourceProfile} element is capable of
describing coverage not only in space, time, and frequency but also
velocity and redshift.  The profile contains up to three types of
component descriptions:
coordinate systems, coordinate values, and coordinate areas or ranges.
The first component describes the coordinate systems to which coordinate
values, areas, and regions are referenced.  While any arbitrary
system can be described in this first part, it is expected that most
VODataService instances will provide a simple pointer to a predefined
system in a registered \xmlel{vs:StandardSTC} record (using the
mechanism summarized in section~\ref{todo} below).  The coordinate values
part will usually be used to describe the coordinate resolution,
errors, or typical sizes.  The coordinate areas part describes actual
regions or ranges covered by the resource in any of the given
coordinate systems.  


Table descriptions appear within a single \xmlel{tableset}
element.  This element can in turn can contain one or more
\xmlel{schema} element in which each schema
represents a set of logically related tables.  It is not required that 
that the schema grouping match the underlying database's
\emph{catalogs} or \emph{schemas}, though it may.  In some cases,
such as when describing the table that is returned from an SIA
service, the terms \emph{catalog} and \emph{schema} may have
little relevance; in this case, the table can be considered part of a
sole ``default'' schema.  



For each table in a schema, one can describe each of the columns,
providing such information as its name, type, UCD,
units, and a textual description.  Providing this information makes it
possible to select a resource based on the kind data contained in its
tables.  



Finally, the VODataService defines specialized interface type
(inheriting from \xmlel{vr:Interface}) called
\xmlel{vs:ParamHTTP}.  This type is used to describe the commonly
used interface that is invoked over HTTP as either a GET or a POST 
in which the arguments are encoded as
\emph{name=value} pairs.  In addition to the access URL, it can
include not only the mime-type of the returned response, it can also
enumerate the input arguments that are supported by the service
implementation.  Much like table columns, one can indicate for each
argument the name, the UCD, the data type, the units, whether it is
required, and a textual description of the argument.  Note that this does
not capture any interdependencies between arguments.  For example, it
cannot indicate if one argument only makes sense in the presence of
another argument.  


\section{The VODataService Metadata}
\label{sect:metadata}


This section enumerates the types and elements defined in the
VODataService extension schema and describes their meaning.  Where a
term matches a term in the RM, its meaning is given
in terms of the RM definition.  


\subsection{Resource Type Extensions}
\label{sect:resext}

\subsubsection{DataCollection}
\label{sect:datacollection}


A \emph{data collection}, which is describable with the
\xmlel{vs:DataCollection} resource type, is a logical
group of data comprising one or more accessible
datasets.  A collection can contain any combination of images,
spectra, catalogs, time-series, or other data.  (In contrast, we talk
about a \emph{dataset} as being a set of digitally-encoded
data that is normally accessible as a single unit -- e.g., a file.)



The \xmlel{vs:DataCollection} type adds seven additional metadata
elements beyond the core VOResource metadata:

% GENERATED: !schemadoc VODataService-v1.2.xsd DataCollection
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:DataCollection} Type Schema Documentation}

\noindent{\small
           A logical grouping of data which, in general, is composed of one 
           or more accessible datasets.  A collection can contain any
           combination of images, spectra, catalogs, or other data.   
         \par}

\noindent{\small
           (A dataset is a collection of digitally-encoded data that 
           is normally accessible as a single unit, e.g. a file.)
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:DataCollection} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="DataCollection" >
  <xs:complexContent >
    <xs:extension base="vr:Resource" >
      <xs:sequence >
        <xs:element name="facility" type="vr:ResourceName" minOccurs="0"
                  maxOccurs="unbounded" />
        <xs:element name="instrument" type="vr:ResourceName" minOccurs="0"
                  maxOccurs="unbounded" />
        <xs:element name="rights" type="vr:Rights" minOccurs="0"
                  maxOccurs="unbounded" />
        <xs:element name="format" type="vs:Format" minOccurs="0"
                  maxOccurs="unbounded" />
        <xs:element name="coverage" type="vs:Coverage" minOccurs="0" />
        <xs:element name="tableset" type="vs:TableSet" minOccurs="0" >
          <xs:unique name="DataCollection-schemaName" >
            <xs:selector xpath="schema" />
            <xs:field xpath="name" />
          </xs:unique>
          <xs:unique name="DataCollection-tableName" >
            <xs:selector xpath="schema/table" />
            <xs:field xpath="name" />
          </xs:unique>
        </xs:element>
        <xs:element name="accessURL" type="vr:AccessURL" minOccurs="0" />
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:DataCollection} Extension Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{facility}]
\begin{description}
\item[Type] string with ID attribute: vr:ResourceName
\item[Meaning] 
                     the observatory or facility used to collect the data 
                     contained or managed by this resource.  
                   
\item[Occurrence] optional; multiple occurrences allowed.

\end{description}
\item[Element \xmlel{instrument}]
\begin{description}
\item[Type] string with ID attribute: vr:ResourceName
\item[Meaning] 
                     the Instrument used to collect the data contain or 
                     managed by a resource.  
                   
\item[Occurrence] optional; multiple occurrences allowed.

\end{description}
\item[Element \xmlel{rights}]
\begin{description}
\item[Type] composite: \xmlel{vr:Rights}
\item[Meaning] 
                      Information about rights held in and over the resource.
                    
\item[Occurrence] optional; multiple occurrences allowed.
\item[Comment] 
                      This should be repeated for all Rights values that apply.
                    

\end{description}
\item[Element \xmlel{format}]
\begin{description}
\item[Type] a string with optional attributes
\item[Meaning] 
                      The physical or digital manifestation of the information 
                      supported by a resource.
                    
\item[Occurrence] optional; multiple occurrences allowed.
\item[Comment] 
                      MIME types should be used for network-retrievable, digital
                      data.  Non-MIME type values are used for media that cannot
                      be retrieved over the network--e.g. CDROM, poster, slides,
                      video cassette, etc.  
                    

\end{description}
\item[Element \xmlel{coverage}]
\begin{description}
\item[Type] composite: \xmlel{vs:Coverage}
\item[Meaning] 
                     Extent of the content of the resource over space, time, 
                     and frequency.
                   
\item[Occurrence] optional

\end{description}
\item[Element \xmlel{tableset}]
\begin{description}
\item[Type] composite: \xmlel{vs:TableSet}
\item[Meaning] 
                     A description of the tables that are part of this
                     collection. 
                   
\item[Occurrence] optional
\item[Comment] 
                     Each schema name and each table name must be
                     unique within this tableset.
                   

\end{description}
\item[Element \xmlel{accessURL}]
\begin{description}
\item[Type] composite: \xmlel{vr:AccessURL}
\item[Meaning] 
                     The URL that can be used to download the data contained in 
                     this data collection.
                   
\item[Occurrence] optional

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED

The definition of the \xmlel{tableset} element forces certain
names within its description to be unique; these constraints are explained
further in section~\ref{sect:unique}.



All of the child elements except \xmlel{tableset} derive
from RM terms.  Four of the elements -- \xmlel{facility}, 
\xmlel{instrument}, \xmlel{rights}\todo{no, that's no longer RM in
VOResource},
and \xmlel{accessURL}--are reuses of elements defined in 
the core VOResource schema, sharing the same syntax and similar
semantics.  In particular, the meanings of \xmlel{facility}
and \xmlel{instrument} in the context of 
\xmlel{vs:DataCollection} are different from that in 
\xmlel{vr:Organisation} only in that in the former type, they refer
to the origin of the data.  



The \xmlel{vs:Format} type is used for
providing a value to the \xmlel{format} element:


% GENERATED: !schemadoc VODataService-v1.2.xsd Format
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{1ex}\noindent\textbf{\xmlel{vs:Format} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="Format" >
  <xs:simpleContent >
    <xs:extension base="xs:token" >
      <xs:attribute name="isMIMEType" type="xs:boolean" default="false" />
    </xs:extension>
  </xs:simpleContent>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:Format} Attributes}

\begingroup\small\begin{bigdescription}
\item[isMIMEType]
\begin{description}
\item[Type] boolean (true/false): xs:boolean
\item[Meaning] 
                 if true, then the content is a MIME Type
               
\item[Occurrence] optional
false
\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED


The \xmlel{isMIMEType} attribute
provides a flag to indicate if the value represents an actual
MIME-type: if it is, this attribute should be explicitly set to
\texttt{true}.




See section~\ref{sect:table} for a specification of
the \xmlel{vs:TableSet} type for describing tables.  


\subsubsection{StandardSTC}
\label{sect:standardstc}


The \xmlel{vs:StandardSTC} resource type is used to register standard
coordinate systems, positions, or regions using the Space-Time
Coordinate standard schema \citep{2007ivoa.spec.1030R} so that
they can by uniquely referenced by name by other resource descriptions
or applications.  This resource type extends the core metadata with a
single element, \xmlel{stcDefinitions}, which contains
the STC definitions.  


% GENERATED: !schemadoc VODataService-v1.2.xsd StandardSTC
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:StandardSTC} Type Schema Documentation}

\noindent{\small
           a description of standard space-time coordinate systems,
           positions, and regions.
         \par}

\noindent{\small
           This resource provides a mechanism for registering standard 
           coordinate systems which other resources may reference as
           part of a coverage descripiton.  In particular, coverage
           descriptions will refer to components of the STC
           descriptions in this resource via an IVOA identifier.  It
           is intended that an application consuming such coverage
           descriptions be able to semantically interpret the
           identifier without resolving it.  For this reason, once a
           standard STC description is registered with this resource 
           type, updating the description is strongly discouraged.  
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:StandardSTC} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="StandardSTC" >
  <xs:complexContent >
    <xs:extension base="vr:Resource" >
      <xs:sequence >
        <xs:element name="stcDefinitions"
                  type="stc:stcDescriptionType"
                  minOccurs="1"
                  maxOccurs="unbounded" />
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:StandardSTC} Extension Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{stcDefinitions}]
\begin{description}
\item[Type] \xmlel{stc:stcDescriptionType}
\item[Meaning] 
                       An STC description of coordinate systems,
                       positions, and/or regions
                     
\item[Occurrence] required; multiple occurrences allowed.
\item[Comment] 
                       Each system, position, and region description
                       should have a an XML ID assigned to it.
                     
\item[Comment] 
                       Because the STC schema sets 
                       elementFormDefault={"}qualified{"}, it is
                       recommended that this element specify the STC 
                       default namespace via an xmlns namespace.
                     

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED


The curation metadata that is part of the core VODataService should
generally refer to the publishing organization and persons that are
responsible for defining the systems, updating the definitions as
needed, and responding to user questions about the definitions.  The
content metadata, in particular the textual contents of the
\xmlel{description} element, should describe the purpose
of the definition and where references to the defined systems,
positions, or regions may be used.  


The content of the \xmlel{stcDefinitions} element is
controlled by the STC schema.  Because that schema uses the 
\verb|elementFormDefault="true"| and most of the STC elements
are defined to be global,
\xmlel{stcDefinitions} child elements must be qualified
as being in the STC namespace
(http://www.ivoa.net/xml/STC/stc-v1.30.xsd), by either setting the 
default namespace (via the \xmlel{xmlns} attribute) or via
explicit qualification via a prefix (see example).  


\subsubsection{DataService}
DataService">


The \xmlel{vs:DataService} resource type is for describing a
service that provides access to astronomical data.  This service adds
to the core VOResource service metadata the ability to associate an
observing facility and/or instrument with the data as well as describe
the coordinate coverage of data via its child \xmlel{coverage}
element.  Note that while these elements are all optional, a resource
of this type still implies access to astronomical data.


% GENERATED: !schemadoc VODataService-v1.2.xsd DataService
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:DataService} Type Schema Documentation}

\noindent{\small
           A service for accessing astronomical data
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:DataService} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="DataService" >
  <xs:complexContent >
    <xs:extension base="vr:Service" >
      <xs:sequence >
        <xs:element name="facility" type="vr:ResourceName" minOccurs="0"
                  maxOccurs="unbounded" />
        <xs:element name="instrument" type="vr:ResourceName" minOccurs="0"
                  maxOccurs="unbounded" />
        <xs:element name="coverage" type="vs:Coverage" minOccurs="0" />
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:DataService} Extension Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{facility}]
\begin{description}
\item[Type] string with ID attribute: vr:ResourceName
\item[Meaning] 
                     the observatory or facility used to collect the data 
                     contained or managed by this resource.  
                   
\item[Occurrence] optional; multiple occurrences allowed.

\end{description}
\item[Element \xmlel{instrument}]
\begin{description}
\item[Type] string with ID attribute: vr:ResourceName
\item[Meaning] 
                     the Instrument used to collect the data contain or 
                     managed by a resource.  
                   
\item[Occurrence] optional; multiple occurrences allowed.

\end{description}
\item[Element \xmlel{coverage}]
\begin{description}
\item[Type] composite: \xmlel{vs:Coverage}
\item[Meaning] 
                     Extent of the content of the resource over space, time, 
                     and frequency.
                   
\item[Occurrence] optional

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED

The use and meaning of the \xmlel{facility} and
\xmlel{instrument} elements are the same as for
\xmlel{vs:DataCollection}.



\subsubsection{CatalogService}
\label{sect:catalogservice}


The \xmlel{vs:CatalogService} resource type is for describing a
service that interacts with astronomical data through one or more
specified tables.  Because it extends the \xmlel{vs:DataService}
type, a catalog service can have a coverage description as well.  The
tabular data may optionally be described via a
\xmlel{tableset} element.



% GENERATED: !schemadoc VODataService-v1.2.xsd CatalogService
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:CatalogService} Type Schema Documentation}

\noindent{\small
            A service that interacts with with astronomical data
            through one or more specified tables.
         \par}

\noindent{\small
            A table with sky coverage typically have columns that give
            longitude-latitude positions in some coordinate system.  
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:CatalogService} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="CatalogService" >
  <xs:complexContent >
    <xs:extension base="vs:DataService" >
      <xs:sequence >
        <xs:element name="tableset" type="vs:TableSet" minOccurs="0" >
          <xs:unique name="CatalogService-schemaName" >
            <xs:selector xpath="schema" />
            <xs:field xpath="name" />
          </xs:unique>
          <xs:unique name="CatalogService-tableName" >
            <xs:selector xpath="schema/table" />
            <xs:field xpath="name" />
          </xs:unique>
        </xs:element>
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:CatalogService} Extension Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{tableset}]
\begin{description}
\item[Type] composite: \xmlel{vs:TableSet}
\item[Meaning] 
                       A description of the tables that are accessible
                       through this service.
                     
\item[Occurrence] optional
\item[Comment] 
                       Each schema name and each table name must be
                       unique within this tableset.
                     

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED

The definition of \xmlel{tableset} element forces certain
names within its description to be unique; these constraints are explained
further in section~\ref{sect:unique}.

\subsection{Coverage}
\label{sect:cover}


The \xmlel{vs:Coverage} type describes how the data samples the
sky, frequency, and time.  



% GENERATED: !schemadoc VODataService-v1.2.xsd Coverage
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:Coverage} Type Schema Documentation}

\noindent{\small
           A description of how a resource's contents or behavior maps
           to the sky, to time, and to frequency space, including
           coverage and resolution. 
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:Coverage} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="Coverage" >
  <xs:sequence >
    <xs:element ref="stc:STCResourceProfile" minOccurs="0" />
    <xs:element name="footprint" type="vs:ServiceReference" minOccurs="0" />
    <xs:element name="waveband" type="vs:Waveband" minOccurs="0"
              maxOccurs="unbounded" />
    <xs:element name="regionOfRegard" type="xs:float" minOccurs="0" />
  </xs:sequence>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:Coverage} Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{}]
\begin{description}
\item[Type] 
\item[Meaning] 
                 The STC description of the location of the resource's 
                 data (or behavior on data) on the sky, in time, and in 
                 frequency space, including resolution. 
               
\item[Occurrence] optional
\item[Comment] 
                 In general, this description should be approximate; a
                 more precise description can be provided by the 
                 footprint service.  
               

\end{description}
\item[Element \xmlel{footprint}]
\begin{description}
\item[Type] a URI with optional attributes
\item[Meaning] 
                  a reference to a footprint service for retrieving 
                  precise and up-to-date description of coverage.  
               
\item[Occurrence] optional
\item[Comment] 
                  the ivo-id attribute refers to a Service record
                  that describes the Footprint capability.  That is,
                  the record will have a capability element describing
                  the service.  The resource refered to may be the 
                  current one.  
               

\end{description}
\item[Element \xmlel{waveband}]
\begin{description}
\item[Type] string with controlled vocabulary
\item[Meaning] 
                  a named spectral region of the electro-magnetic spectrum 
                  that the resource's spectral coverage overlaps with.
               
\item[Occurrence] optional; multiple occurrences allowed.

\item[Allowed Values]\hfil
\begin{longtermsdescription}
\item[Radio]
                 wavelength >= 10 mm; frequency <= 30 GHz.
               
\item[Millimeter]
                 0.1 mm <= wavelength <= 10 mm; 
                 3000 GHz >= frequency >= 30 GHz.
               
\item[Infrared]
                 1 micron <= wavelength <= 100 micons 
               
\item[Optical]
                 0.3 microns <= wavelength <= 1 micon; 
                 300 nm <= wavelength <= 1000 nm; 
                 3000 Angstroms <= wavelength <= 10000 Angstroms
               
\item[UV]
                 0.1 microns <= wavelength <= 0.3 micon; 
                 1000 nm <= wavelength <= 3000 nm; 
                 1000 Angstroms <= wavelength <= 30000 Angstroms
               
\item[EUV]
                 100 Angstroms <= wavelength <= 1000 Angstroms; 
                 12 eV <= energy <= 120 eV
               
\item[X-ray]
                 0.1 Angstroms <= wavelength <= 100 Angstroms; 
                 0.12 keV <= energy <= 120 keV
               
\item[Gamma-ray]
                 energy >= 120 keV
               
\end{longtermsdescription}

\end{description}
\item[Element \xmlel{regionOfRegard}]
\begin{description}
\item[Type] floating-point number: \xmlel{xs:float}
\item[Meaning] 
                  a single numeric value representing the angle, given
                  in decimal degrees, by which a positional query
                  against this resource should be {"}blurred{"} in order
                  to get an appropriate match. 
               
\item[Occurrence] optional
\item[Comment] 
                  In the case of image repositories, it might refer to
                  a typical field-of-view size, or the primary beam
                  size for radio aperture synthesis data.  In the case
                  of object catalogs RoR should normally be the
                  largest of the typical size of the objects, the
                  astrometric errors in the positions, or the
                  resolution of the data.  
               

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED

A detailed, systematic description of coverage is provided via the
child \xmlel{stc:STCResourceProfile} element, taken from
the STC schema, version 1.3, with the namespace,
\xmlel{http://www.ivoa.net/xml/STC/stc-v1.30.xsd} (hereafter
referred using the \xmlel{stc:} prefix).  This element is defined
in the STC schema as a global element; furthermore, the STC schema
sets its global \verb|elementFormDefault="qualified"|.
Consequently, the \xmlel{stc:STCResourceProfile} element
and all its child elements must be qualified as part of the STC
namespace as required by XML Schema.
In applications where common use of XML prefixes is required or
encouraged (e.g. the IVOA Registry Interfaces \citep{todo:RI1.1}),
use of the \xmlel{stc:} prefix to represent the STC namespace is
encouraged.   


\begin{admonition}{Note}
The STC scheme provides rich mark-up for expressing the
       details of the coverage.  In particular, the mark-up is quite
       flexible in the units that can be used.  For example, spectral
       coverage can be given in terms of frequency, wavelength, or
       energy.  While it is recommended that the overall description
       given in the \xmlel{stc:STCResourceProfile} be
       fairly general and approximate, leveraging the richness for a
       detailed description is allowed.
\end{admonition}



The remaining elements provide some summary information about the
coverage. 



\begin{admonition}{Note on Footprint Service}
The \xmlel{footprint} element has been defined in
       anticipation of a future standard IVOA footprint service
       protocol that can be used to respond to detailed spatial
       overlap queries.  Consequently, in the future, applications may
       be able to assume the protocol that footprint service URL
       supports.  When an application is unable to make any
       assumptions, the IVOA Identifier given by the attribute should
       be resolved and the returned resource description should be
       searched for a recognized footprint service capability.</dd> 
\end{admonition}

\subsection{Tabular Data}
\label{sect:table}


The \xmlel{vs:TableSet} type can be used
to describe a set of tables that are part of a single resource and can
be consider functionally all located at a single site.



% GENERATED: !schemadoc VODataService-v1.2.xsd TableSet
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:TableSet} Type Schema Documentation}

\noindent{\small
           The set of tables hosted by a resource.
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:TableSet} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="TableSet" >
  <xs:sequence >
    <xs:element name="schema" type="vs:TableSchema" minOccurs="1"
              maxOccurs="unbounded" />
  </xs:sequence>
  <xs:anyAttribute namespace="##other" />
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:TableSet} Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{schema}]
\begin{description}
\item[Type] composite: \xmlel{vs:TableSchema}
\item[Meaning] 
                A named description of a set of logically related tables.
              
\item[Occurrence] required; multiple occurrences allowed.
\item[Comment] 
                The name given by the {"}name{"} child element must
                be unique within this TableSet instance.  If there is
                only one schema in this set and/or there's no locally
                appropriate name to provide, the name can be set to
                {"}default{"}.  
              
\item[Comment] 
                This aggregation does not need to map to an
                actual database, catalog, or schema, though the
                publisher may choose to aggregate along such
                designations, or particular service protocol may
                recommend it.  
              

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED


The \xmlel{vs:TableSchema} type collects
tables together that are logically related.  For example, a single
resource may provide access several major astronomical catalogs
(e.g. SDSS, 2MASS, and FIRST) from one site, enabling high-performance
cross-correlations between them.  Each catalog can be described in a
separate \xmlel{schema} element, using the elements from
the \xmlel{vs:TableSchema} type. 



% GENERATED: !schemadoc VODataService-v1.2.xsd TableSchema
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:TableSchema} Type Schema Documentation}

\noindent{\small
           A detailed description of a logically-related set of tables
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:TableSchema} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="TableSchema" >
  <xs:sequence >
    <xs:element name="name" type="xs:token" minOccurs="1" maxOccurs="1" />
    <xs:element name="title" type="xs:token" minOccurs="0" />
    <xs:element name="description" type="xs:token" minOccurs="0"
              maxOccurs="1" />
    <xs:element name="utype" type="xs:token" minOccurs="0" />
    <xs:element name="table" type="vs:Table" minOccurs="0"
              maxOccurs="unbounded" />
  </xs:sequence>
  <xs:anyAttribute namespace="##other" />
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:TableSchema} Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{name}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
               A name for the set of tables.  
             
\item[Occurrence] required
\item[Comment] 
               This is used to uniquely identify the table set among
               several table sets.  If a title is not present, this
               name can be used for display purposes.
             
\item[Comment] 
               If there is no appropriate logical name associated with
               this set, the name should be explicitly set to
               {"}default{"}.  
             

\end{description}
\item[Element \xmlel{title}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  a descriptive, human-interpretable name for the table set.
               
\item[Occurrence] optional
\item[Comment] 
                  This is used for display purposes.  There is no requirement
                  regarding uniqueness.  It is useful when there are
                  multiple schemas in the context (e.g. within a
                  tableset; otherwise, the resource title could be
                  used instead).
               

\end{description}
\item[Element \xmlel{description}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
               A free text description of the tableset that should
               explain in general how all of the tables are related.
             
\item[Occurrence] optional

\end{description}
\item[Element \xmlel{utype}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  an identifier for a concept in a data model that
                  the data in this schema as a whole represent.  
               
\item[Occurrence] optional
\item[Comment] 
                  The format defined in the VOTable standard is strongly
                  recommended. 
               

\end{description}
\item[Element \xmlel{table}]
\begin{description}
\item[Type] composite: \xmlel{vs:Table}
\item[Meaning] 
               A description of one of the tables that makes up the set.
             
\item[Occurrence] optional; multiple occurrences allowed.
\item[Comment] 
               The table names for the table should be unique.
             

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED


Each table in a schema is described in detail using the
\xmlel{vs:Table} type.



% GENERATED: !schemadoc VODataService-v1.2.xsd Table
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{1ex}\noindent\textbf{\xmlel{vs:Table} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="Table" >
  <xs:sequence >
    <xs:element name="name" type="xs:token" minOccurs="1" maxOccurs="1" />
    <xs:element name="title" type="xs:token" minOccurs="0" />
    <xs:element name="description" type="xs:token" minOccurs="0" />
    <xs:element name="utype" type="xs:token" minOccurs="0" />
    <xs:element name="column" type="vs:TableParam" minOccurs="0"
              maxOccurs="unbounded" />
    <xs:element name="foreignKey" type="vs:ForeignKey" minOccurs="0"
              maxOccurs="unbounded" />
  </xs:sequence>
  <xs:attribute name="type" type="xs:string" />
  <xs:anyAttribute namespace="##other" />
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:Table} Attributes}

\begingroup\small\begin{bigdescription}
\item[type]
\begin{description}
\item[Type] string: \xmlel{xs:string}
\item[Meaning] 
               a name for the role this table plays.  Recognized
               values include {"}output{"}, indicating this table is output 
               from a query; {"}base\_table{"}, indicating a table
               whose records represent the main subjects of its
               schema; and {"}view{"}, indicating that the table represents
               a useful combination or subset of other tables.  Other 
               values are allowed.  
            
\item[Occurrence] optional
\end{description}


\end{bigdescription}\endgroup



\vspace{0.5ex}\noindent\textbf{\xmlel{vs:Table} Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{name}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  the fully qualified name of the table.  This name 
                  should include all catalog or schema prefixes
                  needed to sufficiently uniquely distinguish it in a
                  query.  
               
\item[Occurrence] required
\item[Comment] 
                  In general, the format of the qualified name may
                  depend on the context; however, when the
                  table is intended to be queryable via ADQL, then the
                  catalog and schema qualifiers are delimited from the
                  table name with dots (.).  
               

\end{description}
\item[Element \xmlel{title}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  a descriptive, human-interpretable name for the table.
               
\item[Occurrence] optional
\item[Comment] 
                  This is used for display purposes.  There is no requirement
                  regarding uniqueness.  
               

\end{description}
\item[Element \xmlel{description}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  a free-text description of the table's contents
               
\item[Occurrence] optional

\end{description}
\item[Element \xmlel{utype}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  an identifier for a concept in a data model that
                  the data in this table represent.  
               
\item[Occurrence] optional
\item[Comment] 
                  The format defined in the VOTable standard is highly
                  recommended. 
               

\end{description}
\item[Element \xmlel{column}]
\begin{description}
\item[Type] composite: \xmlel{vs:TableParam}
\item[Meaning] 
                  a description of a table column.
               
\item[Occurrence] optional; multiple occurrences allowed.

\end{description}
\item[Element \xmlel{foreignKey}]
\begin{description}
\item[Type] composite: \xmlel{vs:ForeignKey}
\item[Meaning] 
                  a description of a foreign keys, one or more columns
                  from the current table that can be used to join with 
                  another table.  
               
\item[Occurrence] optional; multiple occurrences allowed.

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED




Each column in a table can be described using the
\xmlel{vs:TableParam} type which is described in
section~\ref{sect:param}.  The foreign keys in the table that
can be used to join it with another table can be described with the
\xmlel{vs:ForeignKey} type (section~\ref{sect:fkey}).
A foreign key description should only refer to tables described within
the current table set.  



The \xmlel{vs:Table} also provides an attribute for indicating
the role a table plays in the schema.





\subsubsection{Unique Names for Tables}
\label{sect:unique}


The definitions of the \xmlel{tableset} elements used in
the \xmlel{vs:DataCollection} and
\xmlel{vs:CatalogService} types
constrain certain names to be unique.  In particular, all schema names
within a \xmlel{tableset} element must be unique, and all
table names within a \xmlel{tableset} element must be
unique.  (A schema and table may share a common name, such as
``default''.)  These constraints makes it possible to uniquely locate
the description of a schema or table within a VOResource description.  


\begin{admonition}{Remark}
The uniqueness constraints for names
within table sets guarantee that when the following XPath queries are
applied to a \xmlel{tableset} element, zero or one node
only will be returned:

\begin{itemize}
\item\verb|schema[@name="default"]|
\item\verb|schema/table[@name="default"]|
\end{itemize}
\end{admonition}

Name uniqueness is only required when the table set description is
part of a VOResource description.  The name uniqueness rules
\emph{should} also be applied to other uses of the
\xmlel{vs:TableSet} element outside of a VOResource
description.  


\subsubsection{Foreign Keys}
\label{sect:fkey}


The \xmlel{vs:ForeignKey} type allows one to describe foreign
keys in a table that allow it to be joined effectively with another
table.  A foreign key is a set of columns that map to a corresponding
set of columns in another table.  


% GENERATED: !schemadoc VODataService-v1.2.xsd ForeignKey
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:ForeignKey} Type Schema Documentation}

\noindent{\small
           A description of the mapping a foreign key--a set of 
           columns from one table--to columns in another table.  
         \par}

\noindent{\small
           This definition that the foreign key is being described 
           within the context of the table containing the key.  
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:ForeignKey} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="ForeignKey" >
  <xs:sequence >
    <xs:element name="targetTable" type="xs:token" />
    <xs:element name="fkColumn" type="vs:FKColumn" minOccurs="1"
              maxOccurs="unbounded" />
    <xs:element name="description" type="xs:token" minOccurs="0" />
    <xs:element name="utype" type="xs:token" minOccurs="0" />
  </xs:sequence>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:ForeignKey} Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{targetTable}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
               the fully-qualified name (including catalog and schema, as
               applicable) of the table that can be joined with the 
               table containing this foreign key.
             
\item[Occurrence] required

\end{description}
\item[Element \xmlel{fkColumn}]
\begin{description}
\item[Type] composite: \xmlel{vs:FKColumn}
\item[Meaning] 
               a pair of column names, one from this table and one
               from the target table that should be used to join the
               tables in a query.  
             
\item[Occurrence] required; multiple occurrences allowed.

\end{description}
\item[Element \xmlel{description}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  a free-text description of what this key points to
                  and what the relationship means.  
               
\item[Occurrence] optional

\end{description}
\item[Element \xmlel{utype}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  an identifier for a concept in a data model that
                  the association enabled by this key represents.  
               
\item[Occurrence] optional
\item[Comment] 
                  The format defined in the VOTable standard is highly
                  recommended. 
               

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED


In this model, the source of the foreign
key is the current table being described (i.e. represented by the
\xmlel{table} element that contains the
\xmlel{vs:ForeignKey} description, and thus does not need to be
named explicitly).  The key that is described points to the table
given by the \xmlel{targetTable} child element.  Each child
\xmlel{fkColumn} element then gives a pair of columns, one
from the source table and one from the target table, that can be
constrained to be equal in a query that joins the two tables.  






\subsubsection{Extending Table Metadata}
\label{sect:tblext}

It is envisioned that it may be useful in the future to provide richer
metadata for describing tables within a VOResource description than
what are defined in this document.  This document recommends the
use of the following extension mechanisms when richer descriptions are
desired:

\begin{enumerate}
\item Use extended types by applying the \xmlel{xsi:type}
       attribute to the \xmlel{tableset},
       \xmlel{schema}, \xmlel{table}, 
       \xmlel{column} and/or
       \xmlel{dataType} elements.  The values provided in the
       attributes must refer to an XML type legally extended from the types
       associated with these elements according to the rules of XML Schema
       \citep{std:XSD} and the VOResource specification.

\item Apply a globally-defined attribute from a schema other than
       VODataService (i.e. from a namespace other than
       \url{http://www.ivoa.net/xml/VODataService/v1.1} to any of the
       \xmlel{tableset}, \xmlel{schema},
       \xmlel{table}, and/or \xmlel{column}
       elements.

\item When the extended metadata is specific to how the table data is
       accessed via a particular service protocol, then the new
       metadata can be incorporated into a specific capability
       extension (as described in the VOResource specification).  
       This extension may make use of the
       various names within the \xmlel{tableset} to
       indicate where the extension metadata apply.

\item Use the \xmlel{extendedType} attribute of the
       \xmlel{dataType} element (see 
       section~\ref{sect:tbldatatypes}).
       to indicate a more specific data type then those defined by the
       \xmlel{vs:TableParam} type.
\end{enumerate}

\subsection{Interface Type Extension: ParamHTTP}
\label{sect:paramif}


The \xmlel{vs:ParamHTTP} type is a specialized service interface
description that extends the VOResource \xmlel{vr:Interface} type 
(as recommended by VOResource 1.1, section 2.2).  It
describes a service interface that is invoke over HTTP via a GET or a
POST in which the inputs are parameters
encoded as \emph{name=value} pairs, delimited by ampersands
(\verb|&|) and URL-encoded as per RFC 3986 \citep{std:RFC3986}.  When
the service is invoked as a GET service, this input list is appended
to a base URL (where the result must form a legal URL.  Usually, the
URL contains a question mark (\verb|?|) setting off a list of
URL arguments to the URL.



When the service is invoked as a POST, the encoded list of parameters
are uploaded to the service as the HTTP Message Body.  


The \xmlel{vs:ParamHTTP} type is intended for (but not limited
to) use in describing an interface within a VOResource description of
a service capability (as described in VOResource
section 2.2.7); that is, it can be invoked via the
\xmlel{xsi:type} attribute on an \xmlel{interface}
element. 


% GENERATED: !schemadoc VODataService-v1.2.xsd ParamHTTP
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:ParamHTTP} Type Schema Documentation}

\noindent{\small
           A service invoked via an HTTP Query (either Get or Post)
           with a set of arguments consisting of keyword name-value pairs.
        \par}

\noindent{\small
           Note that the URL for help with this service can be put into
           the Service/ReferenceURL element.
        \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:ParamHTTP} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="ParamHTTP" >
  <xs:complexContent >
    <xs:extension base="vr:Interface" >
      <xs:sequence >
        <xs:element name="queryType" type="vs:HTTPQueryType" minOccurs="0"
                  maxOccurs="2" />
        <xs:element name="resultType" type="xs:token" minOccurs="0"
                  maxOccurs="1" />
        <xs:element name="param" type="vs:InputParam" minOccurs="0"
                  maxOccurs="unbounded" />
        <xs:element name="testQuery" type="xs:string" minOccurs="0"
                  maxOccurs="unbounded" />
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:ParamHTTP} Extension Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{queryType}]
\begin{description}
\item[Type] string with controlled vocabulary
\item[Meaning] 
                       The type of HTTP request, either GET or POST.
                     
\item[Occurrence] optional; up to 2 occurrences allowed.

\item[Allowed Values]\hfil
\begin{longtermsdescription}
\item[GET]
\item[POST]
\end{longtermsdescription}
\item[Comment] 
                       The service may indicate support for both GET
                       and POST by providing 2 queryType elements, one
                       with GET and one with POST.
                     

\end{description}
\item[Element \xmlel{resultType}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                       The MIME type of a document returned in the HTTP response.
                     
\item[Occurrence] optional

\end{description}
\item[Element \xmlel{param}]
\begin{description}
\item[Type] composite: \xmlel{vs:InputParam}
\item[Meaning] 
                       a description of a input parameter that can be 
                       provided as a name=value argument to the service.  
                    
\item[Occurrence] optional; multiple occurrences allowed.

\end{description}
\item[Element \xmlel{testQuery}]
\begin{description}
\item[Type] string: \xmlel{xs:string}
\item[Meaning] 
                       an ampersand-delimited list of arguments that
                       can be used to test this service interface; 
                       when provided as the input to this interface,
                       it will produce a legal, non-null response.
                    
\item[Occurrence] optional; multiple occurrences allowed.
\item[Comment] 
                       When the interface supports GET, then the full 
                       query URL is formed by the concatonation of the 
                       base URL (given by the accessURL) and the value 
                       given by this testQuery element.  
                    

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED

The extension metadata defined in the schema definition above are all
optional.  Nevertheless, even when an \xmlel{interface}
instance does not include any of these extended child elements, the
use of \verb|xsi:type="vs:ParamHTTP"| indicates that the interface
accessed via the URL given by the \xmlel{accessURL}
element complies with the general parameter-based protocol described
in this section.  






A important intended use of the \xmlel{vs:ParamHTTP} type is
describing the interface of an IVOA standard service protocol 
of the ``simple'' variety, such as the Simple Image Access Protocol
\citep{2015ivoa.spec.1223D}.  In particular, it is recommended that
specifications that define how a standard service is registered in a
registry \emph{require} the use of the \xmlel{vs:ParamHTTP}
interface type when it is applicable.



Normally, a VOResource
description indicates its support for a standard protocol with
\xmlel{capability} element having a
\xmlel{standardID} attribute set to specific URI representing the
standard.  The standard will usually spell out the HTTP query type,
the returned media type, and input parameters required for compliance;
therefore, it is not necessary that the \xmlel{vs:ParamHTTP}
description provide any of the optional extended metadata, as they are
already implied by the \xmlel{standardID}.  The description need
only reflect the optional or locally unique features of the
interface.  In particular, description may include


\begin{itemize}
\item a \xmlel{queryType} element for a type that is not
  required by the standard (as long as the required query type is
  supported as well),

\item \xmlel{param} elements for any optional parameters
       or local extended parameters (when allowed by the standard).
\end{itemize}


Of course, listing required parameters is always allowed, even when
describing a standard interface as long as these are consistent with
the service specification and the corresponding \xmlel{param}
elements include the attribute \verb|use="required"| (see
section~\ref{sect:inputparam}.  The \xmlel{param}
elements for custom parameters that are not part of the standard (but
are rather local customizations) should include the attribute
\verb|std="false"|.





\subsection{Data Parameters}
\label{sect:param}


The VODataService schema provides several element types for describing
different kinds of data parameters used in datasets and services,
including service input parameters and table columns.  The parameter
types allow one to fully describe a parameter in terms of metadata
that includes name, data type, and meaning.  


All the VODataService parameter types derive from a base type called
\xmlel{vs:BaseParam} which defines all the common parameter
metadata except the data type.  


% GENERATED: !schemadoc VODataService-v1.2.xsd BaseParam
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:BaseParam} Type Schema Documentation}

\noindent{\small
            a description of a parameter that places no restriction on 
            the parameter's data type.
         \par}

\noindent{\small
            As the parameter's data type is usually important, schemas
            normally employ a sub-class of this type (e.g. Param),
            rather than this type directly.
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:BaseParam} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="BaseParam" >
  <xs:sequence >
    <xs:element name="name" type="xs:token" minOccurs="0" />
    <xs:element name="description" type="xs:token" minOccurs="0" />
    <xs:element name="unit" type="xs:token" minOccurs="0" />
    <xs:element name="ucd" type="xs:token" minOccurs="0" />
    <xs:element name="utype" type="xs:token" minOccurs="0" />
  </xs:sequence>
  <xs:anyAttribute namespace="##other" />
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:BaseParam} Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{name}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  the name of the column
               
\item[Occurrence] optional

\end{description}
\item[Element \xmlel{description}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  a free-text description of the column's contents
               
\item[Occurrence] optional

\end{description}
\item[Element \xmlel{unit}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  the unit associated with all values in the column
               
\item[Occurrence] optional

\end{description}
\item[Element \xmlel{ucd}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  the name of a unified content descriptor that
                  describes the scientific content of the parameter.  
               
\item[Occurrence] optional
\item[Comment] 
                  There are no requirements for compliance with any 
                  particular UCD standard.  The format of the UCD can
                  be used to distinguish between UCD1, UCD1+, and
                  SIA-UCD.  See 
                  http://www.ivoa.net/Documents/latest/UCDlist.html
                  for the latest IVOA standard set.  
               

\end{description}
\item[Element \xmlel{utype}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                  an identifier for a concept in a data model that
                  the data in this schema represent.  
               
\item[Occurrence] optional
\item[Comment] 
                  The format defined in the VOTable standard is highly
                  recommended. 
               

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED

Leaving the data type metadatum out of \xmlel{vs:BaseParam}
allows the different kinds of parameters derived from
\xmlel{vs:BaseParam} to restrict the allowed data types to
specific sets.  The subsections below describe the different data
types associated with input parameters
(\xmlel{vs:InputParam}) and table
columns (\xmlel{vs:TableParam}).  The
XML types associated with their \xmlel{dataType} elements
derive from a common parent, \xmlel{vs:DataType}.


% GENERATED: !schemadoc VODataService-v1.2.xsd DataType
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:DataType} Type Schema Documentation}

\noindent{\small
            a type (in the computer language sense) associated with a 
            parameter with an arbitrary name
         \par}

\noindent{\small
            This XML type is used as a parent for defining data types
            with a restricted set of names.
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:DataType} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="DataType" >
  <xs:simpleContent >
    <xs:extension base="xs:token" >
      <xs:attribute name="arraysize" type="vs:ArrayShape" default="1" />
      <xs:attribute name="delim" type="xs:string" default=" " />
      <xs:attribute name="extendedType" type="xs:string" />
      <xs:attribute name="extendedSchema" type="xs:anyURI" />
      <xs:anyAttribute namespace="##other" />
    </xs:extension>
  </xs:simpleContent>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:DataType} Attributes}

\begingroup\small\begin{bigdescription}
\item[arraysize]
\begin{description}
\item[Type] string of the form: \emph{([0-9]+x)*[0-9]*[*]?}
\item[Meaning] 
                     the shape of the array that constitutes the value
                  
\item[Occurrence] optional

1
\item[Comment] 
                     the default is {"}1{"}; i.e. the value is a scalar.
                  
\end{description}
\item[delim]
\begin{description}
\item[Type] string: \xmlel{xs:string}
\item[Meaning] 
                     the string that is used to delimit elements of an array
                     value when arraysize is not {"}1{"}.
                  
\item[Occurrence] optional
 
\item[Comment] 
                     Unless specifically disallowed by the context, 
                     applications should allow optional spaces to 
                     appear in an actual data value before and after 
                     the delimiter (e.g. {"}1, 5{"} when delim={"},{"}).
                  
\item[Comment] 
                     the default is {"} {"}; i.e. the values are delimited 
                     by spaces.  
                  
\end{description}
\item[extendedType]
\begin{description}
\item[Type] string: \xmlel{xs:string}
\item[Meaning] 
                     The data value represented by this type can be
                     interpreted as of a custom type identified by 
                     the value of this attribute.
                  
\item[Occurrence] optional
\item[Comment] 
                     If an application does not recognize this
                     extendedType, it should attempt to handle value
                     assuming the type given by the element's value.
                     string is a recommended default type.
                  
\item[Comment] 
                     This element may make use of the extendedSchema
                     attribute and/or any arbitrary (qualified)
                     attribute to refine the identification of the 
                     type.
                  
\end{description}
\item[extendedSchema]
\begin{description}
\item[Type] a URI: \xmlel{xs:anyURI}
\item[Meaning] 
                     An identifier for the schema that the value given
                     by the extended attribute is drawn from.
                  
\item[Occurrence] optional
\item[Comment] 
                     This attribute is normally ignored if the
                     extendedType attribute is not present.
                  
\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED

The content of an element of type \xmlel{vs:DataType} is the name
of the data type for the current parameter.  When the element is explicitly
a \xmlel{vs:DataType} (as opposed to one of its derived types),
there are no restrictions on the names that may be included.  



A data type description can be augmented via a common set of
\xmlel{vs:DataType} attributes, defined below.  The
\xmlel{arraysize} attribute indicates the parameter is an array
of values of the named type.  Its value describes the shape of the
array, and the \xmlel{delim} attribute may be used to indicate
the delimiter that should appear between elements of an array value.
Depending on the application context, these attribute may not be
enough to effectively parse the array values, in which case more
information must be brought to bear either through assumptions about
a particular derived \xmlel{vs:DataType} or through additional
attributes.  



More descriptive information about the type can be provided via
\xmlel{extendedType} and \xmlel{extendedSchema}, which
provide an alternate data type name.  It is expected that this name
will only be understood by a special subset of applications.  The name
given in the element content, then, represents a more commonly
understood "fall-back" type.   Arbitrary information can also be
provided via any prefix-qualified, globally defined attribute drawn
from an XML Schema other than VODataService (by virtue of the
\xmlel{xs:anyAttribute} specification present
on \xmlel{vs:DataType}).





Note that in the derived parameter description types described below,
the \xmlel{dataType} element is optional.  Its absence
from the parameter description does \emph{not} mean that the
parameter can support any data type; rather, it means that the data
type simply has not been provided (which may limit what an application
can do with the parameter).  If a parameter can truly support any data
type, the \xmlel{vs:BaseParam} type can be used directly when the
context permits.  


\subsubsection{Input Parameters}
\label{sect:inputparam}


Actual parameters are normally described with types derived from
\xmlel{vs:BaseParam}.  The \xmlel{vs:InputParam} is intended
for describing an input parameter to a service or function.  The
allowed data type names (given in the metadata table below) do not
imply a size or precise format; rather, they are intended to be
sufficient for describing an input paramter to a simple REST-like
service or a function in a weakly-typed (e.g. scripting) language.  


% GENERATED: !schemadoc VODataService-v1.2.xsd InputParam
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:InputParam} Type Schema Documentation}

\noindent{\small
            a description of a service or function parameter having a
            fixed data type. 
         \par}

\noindent{\small
            The allowed data type names do not imply a size or precise
            format.  This type is intended to be sufficient for describing
            an input parameter to a simple REST service or a function 
            written in a weakly-typed (e.g., scripting) language.
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:InputParam} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="InputParam" >
  <xs:complexContent >
    <xs:extension base="vs:BaseParam" >
      <xs:sequence >
        <xs:element name="dataType" type="vs:SimpleDataType" minOccurs="0" />
      </xs:sequence>
      <xs:attribute name="use" type="vs:ParamUse" default="optional" />
      <xs:attribute name="std" type="xs:boolean" default="true" />
    </xs:extension>
  </xs:complexContent>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:InputParam} Attributes}

\begingroup\small\begin{bigdescription}
\item[use]
\begin{description}
\item[Type] string with controlled vocabulary
\item[Meaning] 
                     An indication of whether this parameter is
                     required to be provided for the application
                     or service to work properly.  
                  
\item[Occurrence] optional

\item[Allowed Values]\hfil
\begin{longtermsdescription}
\item[required]
                  the parameter is required for the application or
                  service to work properly.  
               
\item[optional]
                  the parameter is optional but supported by the application or
                  service.
               
\item[ignored]
                  the parameter is not supported and thus is ignored by the 
                  application or service.
               
\end{longtermsdescription}
optional
\item[Comment] 
                     Allowed values are {"}required{"} and {"}optional{"}.
                  
\end{description}
\item[std]
\begin{description}
\item[Type] boolean (true/false): xs:boolean
\item[Meaning] 
                     If true, the meaning and behavior of this parameter is
                     reserved and defined by a standard interface.  If
                     false, it represents an implementation-specific
                     parameter that effectively extends the behavior of the 
                     service or application.  
                  
\item[Occurrence] optional
true
\end{description}


\end{bigdescription}\endgroup



\vspace{0.5ex}\noindent\textbf{\xmlel{vs:InputParam} Extension Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{dataType}]
\begin{description}
\item[Type] composite: \xmlel{vs:SimpleDataType}
\item[Meaning] 
                        a type of data contained in the column
                     
\item[Occurrence] optional

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED


By fixing the \xmlel{dataType} child element to that of the
\xmlel{vs:SimpleDataType}, the possible types are restricted to
predefined set appropriate for input parameters.



The \xmlel{vs:InputParam} type accepts two attributes that
indicate the role that the parameter plays as input to the service or
function.


Here is an example for a description
of an input parameter that might appear inside an
\xmlel{vs:ParamHTTP} interface description.  As noted in
section~\ref{sect:paramif}, a \xmlel{param}
element uses the \xmlel{vs:InputParam} type to describe itself:

\begin{lstlisting}[language=XML]
<param use="required">
  <name> radius </name>
  <description>
    search radius; returned objects are restricted to fall 
    within this angular distance of the search position.
  </description>
  <ucd> phys.angSize </ucd>
  <dataType> real </dataType>
</param>
\end{lstlisting}

\subsubsection{Table Columns}
\label{sect:columns}


The \xmlel{vs:TableParam} is also derived from
\xmlel{vs:BaseParam}, and is designed for describing a column of
a table.


% GENERATED: !schemadoc VODataService-v1.2.xsd TableParam
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:TableParam} Type Schema Documentation}

\noindent{\small
            a description of a table parameter having a fixed data type.
         \par}

\noindent{\small
            The allowed data type names match those supported by VOTable.
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:TableParam} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="TableParam" >
  <xs:complexContent >
    <xs:extension base="vs:BaseParam" >
      <xs:sequence >
        <xs:element name="dataType" type="vs:TableDataType" minOccurs="0" />
        <xs:element name="flag" type="xs:token" minOccurs="0"
                  maxOccurs="unbounded" />
      </xs:sequence>
      <xs:attribute name="std" type="xs:boolean" />
    </xs:extension>
  </xs:complexContent>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:TableParam} Attributes}

\begingroup\small\begin{bigdescription}
\item[std]
\begin{description}
\item[Type] boolean (true/false): xs:boolean
\item[Meaning] 
                     If true, the meaning and use of this parameter is
                     reserved and defined by a standard model.  If false, 
                     it represents a database-specific parameter 
                     that effectively extends beyond the standard.  If
                     not provided, then the value is unknown.
                  
\item[Occurrence] optional
\end{description}


\end{bigdescription}\endgroup



\vspace{0.5ex}\noindent\textbf{\xmlel{vs:TableParam} Extension Metadata Elements}

\begingroup\small\begin{bigdescription}\item[Element \xmlel{dataType}]
\begin{description}
\item[Type] \xmlel{vs:DataType} with optional attributes
\item[Meaning] 
                        a type of data contained in the column
                     
\item[Occurrence] optional

\end{description}
\item[Element \xmlel{flag}]
\begin{description}
\item[Type] string: \xmlel{xs:token}
\item[Meaning] 
                        a keyword representing traits of the column.  
                        Recognized values include {"}indexed{"}, {"}primary{"}, and
                        {"}nullable{"}.  
                     
\item[Occurrence] optional; multiple occurrences allowed.
\item[Comment] 
                        See the specification document for definitions 
                        of recognized keywords.
                     

\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED


A table column's data type is indicated with the \xmlel{dataType}
element with a name drawn from a standard set of names.  The
\xmlel{vs:TableParam} type is not restricted to a single standard
set, and the VODataService schema defines two standard sets: one
corresponding to VOTable data types \citep{2013ivoa.spec.0920O}
and one for Table Access Protocol types.  Because
its XML type, \xmlel{vs:TableDataType} is abstract, the
\xmlel{dataType} element MUST include an
\xmlel{xsi:type} attribute to indicate which standard set of type
names is being used.  


As an example, here is a declination column called ``Dec'' and is
defined to have the VOTable-defined type double:

\begin{lstlisting}[language=XML]
<column>
   <name> Dec </name>
   <description> the J2000 declination of the object </description>
   <ucd> pos.eq.dec </ucd>
   <dataType xsi:type="vs:VOTableType"> double </dataType>
</column>
\end{lstlisting}


\subsubsection{Table Column Data Types}
\label{tbldatatypes}


The VODataService schema defines two XML types that derive from
\xmlel{vs:TableDataType}:  \xmlel{vs:VOTableType} and
\xmlel{vs:TAPType}.  


% GENERATED: !schemadoc VODataService-v1.2.xsd VOTableType
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:VOTableType} Type Schema Documentation}

\noindent{\small
            a data type supported explicitly by the VOTable format
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:VOTableType} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="VOTableType" >
  <xs:simpleContent >
    <xs:restriction base="vs:TableDataType" >
      <xs:enumeration value="boolean" />
      <xs:enumeration value="bit" />
      <xs:enumeration value="unsignedByte" />
      <xs:enumeration value="short" />
      <xs:enumeration value="int" />
      <xs:enumeration value="long" />
      <xs:enumeration value="char" />
      <xs:enumeration value="unicodeChar" />
      <xs:enumeration value="float" />
      <xs:enumeration value="double" />
      <xs:enumeration value="floatComplex" />
      <xs:enumeration value="doubleComplex" />
      <xs:attribute name="arraysize" type="vs:ArrayShape" default="1" />
      <xs:attribute name="delim" type="xs:string" default=" " />
      <xs:attribute name="extendedType" type="xs:string" />
      <xs:attribute name="extendedSchema" type="xs:anyURI" />
      <xs:anyAttribute namespace="##other" />
    </xs:restriction>
  </xs:simpleContent>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:VOTableType} Attributes}

\begingroup\small\begin{bigdescription}
\item[arraysize]
\begin{description}
\item[Type] string of the form: \emph{([0-9]+x)*[0-9]*[*]?}
\item[Meaning] 
\item[Occurrence] optional

1
\end{description}
\item[delim]
\begin{description}
\item[Type] string: \xmlel{xs:string}
\item[Meaning] 
\item[Occurrence] optional
 
\end{description}
\item[extendedType]
\begin{description}
\item[Type] string: \xmlel{xs:string}
\item[Meaning] 
\item[Occurrence] optional
\end{description}
\item[extendedSchema]
\begin{description}
\item[Type] a URI: \xmlel{xs:anyURI}
\item[Meaning] 
\item[Occurrence] optional
\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED

% GENERATED: !schemadoc VODataService-v1.2.xsd TAPType
\begin{generated}
\begingroup
      	\renewcommand*\descriptionlabel[1]{%
      	\hbox to 5.5em{\emph{#1}\hfil}}\vspace{2ex}\noindent\textbf{\xmlel{vs:TAPType} Type Schema Documentation}

\noindent{\small
            a data type supported explicitly by the Table Access 
            Protocol (v1.0).  
         \par}

\vspace{1ex}\noindent\textbf{\xmlel{vs:TAPType} Type Schema Definition}

\begin{lstlisting}[language=XML,basicstyle=\footnotesize]
<xs:complexType name="TAPType" >
  <xs:simpleContent >
    <xs:restriction base="vs:TAPDataType" >
      <xs:enumeration value="BOOLEAN" />
      <xs:enumeration value="SMALLINT" />
      <xs:enumeration value="INTEGER" />
      <xs:enumeration value="BIGINT" />
      <xs:enumeration value="REAL" />
      <xs:enumeration value="DOUBLE" />
      <xs:enumeration value="TIMESTAMP" />
      <xs:enumeration value="CHAR" />
      <xs:enumeration value="VARCHAR" />
      <xs:enumeration value="BINARY" />
      <xs:enumeration value="VARBINARY" />
      <xs:enumeration value="POINT" />
      <xs:enumeration value="REGION" />
      <xs:enumeration value="CLOB" />
      <xs:enumeration value="BLOB" />
      <xs:attribute name="arraysize" type="vs:ArrayShape" default="1" />
      <xs:attribute name="delim" type="xs:string" default=" " />
      <xs:attribute name="extendedType" type="xs:string" />
      <xs:attribute name="extendedSchema" type="xs:anyURI" />
      <xs:attribute name="size" type="xs:positiveInteger" />
      <xs:anyAttribute namespace="##other" />
    </xs:restriction>
  </xs:simpleContent>
</xs:complexType>
\end{lstlisting}

\vspace{0.5ex}\noindent\textbf{\xmlel{vs:TAPType} Attributes}

\begingroup\small\begin{bigdescription}
\item[arraysize]
\begin{description}
\item[Type] string of the form: \emph{([0-9]+x)*[0-9]*[*]?}
\item[Meaning] 
\item[Occurrence] optional

1
\end{description}
\item[delim]
\begin{description}
\item[Type] string: \xmlel{xs:string}
\item[Meaning] 
\item[Occurrence] optional
 
\end{description}
\item[extendedType]
\begin{description}
\item[Type] string: \xmlel{xs:string}
\item[Meaning] 
\item[Occurrence] optional
\end{description}
\item[extendedSchema]
\begin{description}
\item[Type] a URI: \xmlel{xs:anyURI}
\item[Meaning] 
\item[Occurrence] optional
\end{description}
\item[size]
\begin{description}
\item[Type] \xmlel{xs:positiveInteger}
\item[Meaning] 
\item[Occurrence] optional
\end{description}


\end{bigdescription}\endgroup

\endgroup
\end{generated}

% /GENERATED




The \xmlel{vs:TAPType} XML type provides an additional attribute,
\xmlel{size}, corresponding to the \verb|"size"| column from the
TAP\_SCHEMA.columns defined by the TAP standard
\citep{todo:TAP1.1}.\todo{deprecate}




Examples for column definitions:
A representation of a string type using the
\xmlel{vs:VOTableType} set of types:

\begin{lstlisting}
<column>
   <name> id </name>
   <description> the object identifier </description>
   <ucd> meta.id </ucd>
   <dataType xsi:type="vs:VOTableType" arraysize="*"> char </dataType>
</column>
\end{lstlisting}

The same column described using the
\xmlel{vs:TAPType} set of types:\todo{deprecate this}

\begin{lstlisting}
<column>
   <name> id </name>
   <description> the object identifier </description>
   <ucd> meta.id </ucd>
   <dataType xsi:type="vs:TAPType"> VARCHAR </dataType>
</column>
\end{lstlisting}

The same column again described using the
\xmlel{vs:TAPType} set of types, assuming a fixed-length
string:\todo{deprecate this}

\begin{lstlisting}
<column>
   <name> id </name>
   <description> the object identifier </description>
   <ucd> meta.id </ucd>
   <dataType xsi:type="vs:TAPType" size="8" > CHAR </dataType>
</column>
\end{lstlisting}



In general, the \xmlel{vs:TableParam}'s \xmlel{dataType}
can support any non-abstract type legally derived from
\xmlel{vs:TableDataType}.  However, in the context of a
\xmlel{vs:DataCollection} or \xmlel{vs:CatalogService}
resource description, it is strongly recommended that either
\xmlel{vs:VOTableType} or \xmlel{vs:TAPType} (or some other IVOA
standard type derived from \xmlel{vs:TableDataType}) be used to
ensure maximum interoperability.  When the actual column type is not
well matched to a type from one of these standard sets, authors are
encouraged to use the \xmlel{extendedType} attribute to refer to
a more specific type.  Note that the ADQL standard
\citep{todo:ADQL2.2} defines an explicit mapping between
SQL types and VOTable types.  Thus, in the context of a
\xmlel{vs:CatalogService} resource description that supports a
TAP capability (perhaps in addition to other catalog services like
Simple Cone Search), use of the
\xmlel{vs:TAPType} data type is preferred.



\begin{admonition}{Note}
The motivation for providing two standard data type sets,
       \xmlel{vs:VOTableType} and \xmlel{vs:TAPType}, is to maximize
       the ease of generating the table description, particular as
       part of the VO Standard Interface \citep{2017ivoa.spec.0524G}
       and for legacy services.  The table description for
       ``stand-alone'' SIA, SCS, and SSA services can be readily
       generated using the \xmlel{vs:VOTableType} data types from
       these interface's respective metadata queries.  Newer services
       supporting TAP could generate its description using its
       TAP\_SCHEMA queries.

       
       The motivation for specifying a column's data type using the
       \xmlel{xsi:type} mechanism is mainly to allow for the
       possibility that the official TAP data types will evolve.  This
       allows the IVOA to define new data type sets without updating
       the VODataService standard.  Using non-IVOA-standardized data
       type names is expected to undermine interoperability and so is
       therefore discouraged.  
\end{admonition}

\appendix

\section{Compatibility Issues with VODataService 1.0}
\label{vods10-compat}

The working draft version 1.0 of the VODataService schema has been in
use in IVOA registries since about 2008\todo{Do we want to keep this?
I'd say no}.  It is expected that
registries will migrate over to version 1.1 gradually and during the
transition, there may well be instances of both v1.1 and v1.0 in the
same registry.  While the metadata structures are the mostly the same
(particularly the core VOResource metadata), it is worth enumerating
where they are different as this can affect how queries against
differing metadata are formed.

\begin{itemize}
\item In v1.1, \xmlel{schema} replaces v1.0's
       \xmlel{catalog}. 

\item In v1.0, the root element of a table description in a
       \xmlel{vs:DataCollection} was
       \xmlel{catalog}.  Consequently, a
       \xmlel{table} element in a v1.1 record is one
       level lower than in v1.0.  

\item In v1.0, the root element of a table description in a
       \xmlel{vs:CatalogService} was
       \xmlel{table}.  Consequently, a
       \xmlel{table} element in a v1.1 record is one
       level lower than in v1.0.  

\item Version 1.1's \xmlel{vs:Coverage} type now
       contains a \xmlel{regionOfRegard} element.  In
       v1.0, this metadatum was only available via
       \xmlel{coverage/stc:STCResourceProfile/stc:AstroCoord/stc:Size}.
       

\item Version 1.1's \xmlel{vs:TableParam} (for describing table
       columns) adds \xmlel{utype} and
       \xmlel{flag} elements.  The v1.1
       \xmlel{vs:InputParam} adds a \xmlel{utype}
       element. 
       
\end{itemize}


\section{Changes from previous versions}

\subsection{Changes from REC-1.1}

\begin{itemize}
\item Ported source to \ivoatex.
\end{itemize}

\subsection{Changes since PR-20100916}

\begin{itemize}
  \item updated status for elevation to Recommendation.
  \item cleaned-up mis-labeled and mis-ordered change history.
\end{itemize}

\subsection{Changes since PR-20100914}

\begin{itemize}
  \item added change history for PR-20100412.
  \item added Note about STC mark-up in 3.2
  \item reworded sentence describing content of \xmlel{vs:DataType} in
       section 3.5.
\end{itemize}

\subsection{Changes since PR-20100412}

\begin{itemize}
  \item fix numerous typos discovered in TCG review
  \item added section 1.1 to describe role of standard in the VO
       architecture, including diagram.
  \item corrected frequency range for the UV waveband
  \item corrected links to reference documents
\end{itemize}

\subsection{Changes since PR-20090903}

\begin{itemize}
  \item added \xmlel{testQuery}
       to \xmlel{vs:ParamHTTP}
  \item in text, added explanation of
       \xmlel{vs:Format}
  \item grammatical clean-up
\end{itemize}

\subsection{Changes since WD-20090508 (v1.10)}

\begin{itemize}
  \item corrected errors in example in Introduction
  \item added \xmlel{description} and
       \xmlel{utype} elements to the
       \xmlel{vs:ForeignKey} type for consistency with TAP.
  \item changed type names \xmlel{vs:TAP} to
       \xmlel{vs:TAPType} and \xmlel{vs:VOTable}
       \xmlel{vs:VOTableType}.
\end{itemize}

\bibliography{ivoatex/ivoabib,ivoatex/docrepo}

\end{document}
